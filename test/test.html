<!doctype html>
<html>
  <head>
    <title>ClassObserver Test</title>
    <meta charset="utf-8">
    <style>
      p { margin: 0.75rem 0; }

      mark {
        font-family: monospace;
      }

      mark:after {
        content: 'class="' attr(class) '"';
        margin-left: 0.333em;
      }
    </style>
  </head>
  <body>
    <button type="button" id="foo-1">Toggle foo</button>
    <button type="button" id="bar-1">Toggle bar</button>
    <button type="button" id="baz-1">Toggle baz</button>
    <p><mark id="target-1">Target 1</mark></p>

    <button type="button" id="foo-2">Toggle foo</button>
    <button type="button" id="bar-2">Toggle bar</button>
    <button type="button" id="baz-2">Toggle baz</button>
    <p><mark id="target-2">Target 2</mark></p>

    <script src="../bower_components/which-transition-end/index.js"></script>
    <script src="../bower_components/bind/index.js"></script>
    <script src="../bower_components/custom-event/index.js"></script>
    <script src="../index.js"></script>
    <script>
      var slice = Array.prototype.slice,
          targets = document.querySelectorAll('mark'),
          foo1Trigger = document.querySelector('#foo-1'),
          bar1Trigger = document.querySelector('#bar-1'),
          baz1Trigger = document.querySelector('#baz-1'),
          foo2Trigger = document.querySelector('#foo-2'),
          bar2Trigger = document.querySelector('#bar-2'),
          baz2Trigger = document.querySelector('#baz-2');

      slice.call(targets).forEach(function(target) {
        new ClassObserver(target);
        target.addEventListener('classChanged', function(e) {
          console.log('  observeeId: "' + e.detail.observeeId + '"');
          console.log('    oldClass: "' + e.detail.oldClass + '"');
          console.log('currentClass: "' + e.detail.currentClass + '"');
        });
      });

      foo1Trigger.addEventListener('click', function(e) {
        document.getElementById('target-1').classList.toggle('foo');
      }, false);

      bar1Trigger.addEventListener('click', function(e) {
        document.getElementById('target-1').classList.toggle('bar');
      }, false);

      baz1Trigger.addEventListener('click', function(e) {
        document.getElementById('target-1').classList.toggle('baz');
      }, false);

      foo2Trigger.addEventListener('click', function(e) {
        document.getElementById('target-2').classList.toggle('foo');
      }, false);

      bar2Trigger.addEventListener('click', function(e) {
        document.getElementById('target-2').classList.toggle('bar');
      }, false);

      baz2Trigger.addEventListener('click', function(e) {
        document.getElementById('target-2').classList.toggle('baz');
      }, false);
    </script>
  </body>
</html>
